<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢å‰æ®µæ—¶é—´æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®,åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™,å°è¯•äº†ä¸€ä¸‹æŠŠæ•°æ®å­˜å‚¨è¿™å—ä»FMDBæ¢ä¸ºRealm,æœ€åˆçš„ç†ç”±å°±æ˜¯è§‰å¾—Realmå¾ˆé…·,åæ¥ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åå‘ç°è‡ªå·±çš„é€‰æ‹©æ˜¯æ˜æ™ºçš„:  æ–‡æ¡£è¯¦ç»†,ç”šè‡³æœ‰ä¸­æ–‡ç‰ˆ,å½“ç„¶ä¸­æ–‡ç‰ˆæ›´æ–°æ¯”è¾ƒæ…¢. ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å»StackoverflowåŸºæœ¬ä¸Šéƒ½èƒ½æ‰¾åˆ°,Realmå›¢é˜Ÿå›ç­”ä¹Ÿç‰¹åˆ«å¿«. æŸ¥è¯¢é€Ÿåº¦è¶…å¿«(çœŸæ­£å®ç°äº†æ‡’åŠ è½½,å³ç”¨åˆ°æ—¶æ‰ä»ç£ç›˜ä¸­æŸ¥è¯¢). ç›¸æ¯”">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“">
<meta property="og:url" content="http://yoursite.com/2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/index.html">
<meta property="og:site_name" content="crossPQW">
<meta property="og:description" content="ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢å‰æ®µæ—¶é—´æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®,åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™,å°è¯•äº†ä¸€ä¸‹æŠŠæ•°æ®å­˜å‚¨è¿™å—ä»FMDBæ¢ä¸ºRealm,æœ€åˆçš„ç†ç”±å°±æ˜¯è§‰å¾—Realmå¾ˆé…·,åæ¥ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åå‘ç°è‡ªå·±çš„é€‰æ‹©æ˜¯æ˜æ™ºçš„:  æ–‡æ¡£è¯¦ç»†,ç”šè‡³æœ‰ä¸­æ–‡ç‰ˆ,å½“ç„¶ä¸­æ–‡ç‰ˆæ›´æ–°æ¯”è¾ƒæ…¢. ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å»StackoverflowåŸºæœ¬ä¸Šéƒ½èƒ½æ‰¾åˆ°,Realmå›¢é˜Ÿå›ç­”ä¹Ÿç‰¹åˆ«å¿«. æŸ¥è¯¢é€Ÿåº¦è¶…å¿«(çœŸæ­£å®ç°äº†æ‡’åŠ è½½,å³ç”¨åˆ°æ—¶æ‰ä»ç£ç›˜ä¸­æŸ¥è¯¢). ç›¸æ¯”">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/290760-790baece0848503f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-12-14T15:14:15.404Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“">
<meta name="twitter:description" content="ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢å‰æ®µæ—¶é—´æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®,åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™,å°è¯•äº†ä¸€ä¸‹æŠŠæ•°æ®å­˜å‚¨è¿™å—ä»FMDBæ¢ä¸ºRealm,æœ€åˆçš„ç†ç”±å°±æ˜¯è§‰å¾—Realmå¾ˆé…·,åæ¥ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åå‘ç°è‡ªå·±çš„é€‰æ‹©æ˜¯æ˜æ™ºçš„:  æ–‡æ¡£è¯¦ç»†,ç”šè‡³æœ‰ä¸­æ–‡ç‰ˆ,å½“ç„¶ä¸­æ–‡ç‰ˆæ›´æ–°æ¯”è¾ƒæ…¢. ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å»StackoverflowåŸºæœ¬ä¸Šéƒ½èƒ½æ‰¾åˆ°,Realmå›¢é˜Ÿå›ç­”ä¹Ÿç‰¹åˆ«å¿«. æŸ¥è¯¢é€Ÿåº¦è¶…å¿«(çœŸæ­£å®ç°äº†æ‡’åŠ è½½,å³ç”¨åˆ°æ—¶æ‰ä»ç£ç›˜ä¸­æŸ¥è¯¢). ç›¸æ¯”">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/290760-790baece0848503f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/"/>





  <title>ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“ | crossPQW</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">crossPQW</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é»„å°‘å">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="crossPQW">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-10-19T15:39:40+08:00">
                2016-10-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢"><a href="#ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢"></a>ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢</h3><p>å‰æ®µæ—¶é—´æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®,åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™,å°è¯•äº†ä¸€ä¸‹æŠŠæ•°æ®å­˜å‚¨è¿™å—ä»<code>FMDB</code>æ¢ä¸º<code>Realm</code>,æœ€åˆçš„ç†ç”±å°±æ˜¯è§‰å¾—<code>Realm</code>å¾ˆé…·,åæ¥ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åå‘ç°è‡ªå·±çš„é€‰æ‹©æ˜¯æ˜æ™ºçš„:</p>
<ul>
<li><a href="https://realm.io/docs/objc/latest/#getting-started" target="_blank" rel="noopener">æ–‡æ¡£</a>è¯¦ç»†,ç”šè‡³æœ‰ä¸­æ–‡ç‰ˆ,å½“ç„¶ä¸­æ–‡ç‰ˆæ›´æ–°æ¯”è¾ƒæ…¢.</li>
<li>ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å»StackoverflowåŸºæœ¬ä¸Šéƒ½èƒ½æ‰¾åˆ°,Realmå›¢é˜Ÿå›ç­”ä¹Ÿç‰¹åˆ«å¿«.</li>
<li>æŸ¥è¯¢é€Ÿåº¦è¶…å¿«(çœŸæ­£å®ç°äº†æ‡’åŠ è½½,å³ç”¨åˆ°æ—¶æ‰ä»ç£ç›˜ä¸­æŸ¥è¯¢).</li>
<li>ç›¸æ¯”FMDB,APIå‹å¥½åˆ°çˆ†ç‚¸.</li>
<li>è·¨å¹³å°(æˆ‘å¸iOSå®‰å“éƒ½ç”¨äº†Realm).</li>
<li>æä¾›äº†Macç‰ˆRealm Browseræ–¹ä¾¿æŸ¥çœ‹æ•°æ®,Mac app storeä¸‹è½½å³å¯.</li>
</ul>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å½“ç„¶ä½ å¯ä»¥ç›´æ¥ä¸‹è½½Realmåº“æ‹–åˆ°é¡¹ç›®ä¸­,ä¸è¿‡ç”±äºå¢™çš„å­˜åœ¨,ç›´æ¥åœ¨realmå®˜ç½‘ä¸‹è½½ä¼šæ¯”è¾ƒæ…¢,å¼ºçƒˆæ¨èä½¿ç”¨CocoaPodsæˆ–è€…Carthageå®‰è£…,åªéœ€è¦<code>pod &#39;Realm&#39;</code>æˆ–è€…åœ¨<code>Cartfile</code>ä¸­æ·»åŠ <code>github &quot;realm/realm-cocoa&quot;</code>å³å¯.</p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><h5 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h5><p>æœ€ç®€å•çš„æ–¹å¼,ä½¿ç”¨é»˜è®¤é…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RLMRealm *realm = [RLMRealm defaultRealm];</span><br></pre></td></tr></table></figure></p>
<p>é»˜è®¤æƒ…å†µä¸‹,realmæ•°æ®åº“å­˜å‚¨åœ¨<code>Document</code>è·¯å¾„ä¸‹,é»˜è®¤æ•°æ®åº“æ–‡ä»¶åå­—æ˜¯<code>default.realm</code>,å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿™äº›é€‰é¡¹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // ä½¿ç”¨é»˜è®¤çš„ç›®å½•ï¼Œä½†æ˜¯ä½¿ç”¨ç”¨æˆ·åæ¥æ›¿æ¢é»˜è®¤çš„æ–‡ä»¶å </span><br><span class="line">RLMRealmConfiguration *config = [RLMRealmConfiguration defaultConfiguration];</span><br><span class="line">config.fileURL = [[[config.fileURL URLByDeletingLastPathComponent]  URLByAppendingPathComponent:@&quot;yourname&quot;] URLByAppendingPathExtension:@&quot;realm&quot;]; </span><br><span class="line">// å°†è¿™ä¸ªé…ç½®åº”ç”¨åˆ°é»˜è®¤çš„ Realm æ•°æ®åº“å½“ä¸­</span><br><span class="line"> [RLMRealmConfiguration setDefaultConfiguration:config];</span><br></pre></td></tr></table></figure></p>
<p>é»˜è®¤æƒ…å†µä¸‹,realmæ˜¯åŸºäºç£ç›˜ç¼“å­˜çš„,ä½†æ˜¯å‡å¦‚æˆ‘ä»¬æœ‰æ—¶å€™ä¸æƒ³å‚¨å­˜æ•°æ®,åˆæƒ³éœ€è¦çµæ´»çš„è¿›è¡Œæ•°æ®è¯»å†™,è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå†…å­˜æ•°æ®åº“,åˆ›å»ºå†…å­˜æ•°æ®åº“åŒæ ·éå¸¸ç®€å•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RLMRealmConfiguration *config = [RLMRealmConfiguration defaultConfiguration];</span><br><span class="line">//æŒ‡å®šinMemoryIdentifierå³å¯</span><br><span class="line">config.inMemoryIdentifier = @&quot;MyInMemoryRealm&quot;;</span><br><span class="line">RLMRealm *realm = [RLMRealm realmWithConfiguration:config error:nil];</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯ç”¨çš„æ—¶å€™æˆ‘ä»¬è¦æ³¨æ„æ•°æ®åº“å®ä¾‹è¢«è‡ªåŠ¨é‡Šæ”¾æ‰, è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨appçš„ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå¯¹realmå†…å­˜æ•°æ®åº“çš„å¼ºå¼•ç”¨.</p>
<h5 id="æ„å»ºåŸºäºrealmçš„æ•°æ®model"><a href="#æ„å»ºåŸºäºrealmçš„æ•°æ®model" class="headerlink" title="æ„å»ºåŸºäºrealmçš„æ•°æ®model"></a>æ„å»ºåŸºäºrealmçš„æ•°æ®model</h5><p>æ„å»ºä¸€ä¸ªåŸºäºrealmçš„æ•°æ®modeléå¸¸ç®€å•,åªéœ€è¦ç»§æ‰¿è‡ª<code>RLMObject</code>å³å¯,å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡Xcodeæ’ä»¶ç›´æ¥æ–°å»ºä¸€ä¸ªRealm class,ä¸è¿‡æˆ‘è¿˜æ˜¯ä¹ æƒ¯æ‰‹åŠ¨åˆ›å»º.<br>ä»¥æˆ‘çš„é¡¹ç›®ä¸ºä¾‹,æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBookæ¨¡å‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@interface Book :RLMObject</span><br><span class="line">@property (nonatomic, copy) NSString *ID;</span><br><span class="line">@property (nonatomic, copy) NSString *title;</span><br><span class="line">@property (nonatomic, copy) NSString *cover;</span><br><span class="line">@property (nonatomic, assign) long date;</span><br><span class="line">@property (nonatomic, strong) Day *firstDay;</span><br><span class="line">@property (nonatomic, strong) RLMArray &lt;Day *&gt; *days;</span><br><span class="line">@end</span><br><span class="line">RLM_ARRAY_TYPE(Day)</span><br><span class="line"></span><br><span class="line">@implementation Book</span><br><span class="line">+ (NSString *)primaryKey &#123;</span><br><span class="line">Â  Â  return @&quot;ID&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¾ç½®å±æ€§é»˜è®¤å€¼</span><br><span class="line">+ (NSDictionary *)defaultPropertyValues&#123; </span><br><span class="line">    return @&#123;@&quot;title&quot;:@&quot;æµ‹è¯•&quot; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¾ç½®å¿½ç•¥å±æ€§,å³ä¸å­˜åˆ°realmæ•°æ®åº“ä¸­</span><br><span class="line">+ (NSArray&lt;NSString *&gt; *)ignoredProperties &#123;</span><br><span class="line">Â  Â  return @[@&quot;days&quot;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä¸€èˆ¬æ¥è¯´,å±æ€§ä¸ºnilçš„è¯realmä¼šæŠ›å‡ºå¼‚å¸¸,ä½†æ˜¯å¦‚æœå®ç°äº†è¿™ä¸ªæ–¹æ³•çš„è¯,å°±åªæœ‰nameä¸ºnilä¼šæŠ›å‡ºå¼‚å¸¸,ä¹Ÿå°±æ˜¯è¯´ç°åœ¨coverå±æ€§å¯ä»¥ä¸ºç©ºäº†</span><br><span class="line">+ (NSArray *)requiredProperties &#123; </span><br><span class="line">    return @[@&quot;name&quot;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¾ç½®ç´¢å¼•,å¯ä»¥åŠ å¿«æ£€ç´¢çš„é€Ÿåº¦</span><br><span class="line">+ (NSArray *)indexedProperties &#123;</span><br><span class="line">Â  Â  return @[@&quot;ID&quot;];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>åœ¨è¿™ä¸ªBookæ¨¡å‹ä¸­,æœ‰<code>ID,title,cover,date,days</code>è¿™å‡ ä¸ªå­—æ®µ,realmæ”¯æŒ<code>BOOL,bool,int,NSInteger,long,long long,float,double,NSString,NSDate,NSData</code><br> ä»¥åŠ <a href="https://realm.io/cn/docs/objc/latest/#optional-properties" target="_blank" rel="noopener">è¢«ç‰¹æ®Šç±»å‹æ ‡è®°çš„</a> NSNumberè¿™äº›ç±»å‹.</p>
<ul>
<li>Tips:å¦‚æœæƒ³å­˜å‚¨å›¾ç‰‡çš„è¯,å¯ä»¥æŠŠ<code>UIImage</code>è½¬ä¸º<code>NSData</code>å­˜å‚¨,å½“ç„¶Realmé™åˆ¶äº†å•ä¸ªå›¾ç‰‡å¤§å°ä¸º16M,æ‰€ä»¥æœ€å¥½çš„æµ‹è¯•æ˜¯æ‰‹åŠ¨æŠŠå›¾ç‰‡å­˜å‚¨åˆ°ç£ç›˜,ç„¶åRealmåªå°ºå¯¸å›¾ç‰‡çš„url,urlå¯ä»¥æ˜¯è¿œç¨‹urlæˆ–è€…æœ¬åœ°çš„è·¯å¾„.</li>
</ul>
<p>é€šè¿‡<code>days</code>è¿™ä¸ªå­—æ®µå¯ä»¥çœ‹åˆ°realmå®ç°To-Oneæˆ–è€…To-Manyå…³ç³»å¾ˆç®€å•,åˆ›å»ºä¸€å¯¹ä¸€å…³ç³»çš„è¯ç›´æ¥å®šä¹‰ä¸ºpropertyå³å¯,åˆ›å»ºä¸€å¯¹å¤šå…³ç³»çš„è¯,ä½¿ç”¨<code>RLM_ARRAY_TYPE</code>å®åˆ›å»ºåè®®,ç„¶åå®šä¹‰<code>RLMArray&lt;Day*&gt;</code>ç±»å‹å°±è¡Œå•¦.<br>é€šè¿‡<code>primaryKey</code>æˆ‘ä»¬å¯ä»¥ç»™modelè®¾ç½®ä¸€ä¸ªä¸»é”®,è¿™å¯¹äºæˆ‘ä»¬è¿›è¡Œæ·»åŠ æ•°æ®ä¸æ›´æ–°æ•°æ®çš„æ—¶å€™å¾ˆæœ‰å¸®åŠ©,æ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ·»åŠ æˆ–è€…ä¿®æ”¹ä¸€æ¡æ•°æ®çš„è¯,åªéœ€è¦åœ¨äº‹åŠ¡ä¸­æ“ä½œå³å¯:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Book *book = [[Book alloc] init];</span><br><span class="line">book.ID = @&quot;ABCDEFG&quot;;</span><br><span class="line">book.title = @&quot;å¨å°¼æ–¯ä¹‹è¡Œ&quot;;</span><br><span class="line">book.cover = @&quot;www.google.com&quot;;</span><br><span class="line">//æ·»åŠ æ•°æ®</span><br><span class="line">RLMRealm *realm = [RLMRealm defaultRealm];</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">[realm addObject:book];</span><br><span class="line">[realm commitWriteTransaction];</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹æ•°æ®</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">book.title = @&quot;ç¾è¥¿ä¹‹è¡Œ&quot;;</span><br><span class="line">[realm commitWriteTransaction];</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæˆ‘ä»¬è®¾ç½®äº†ä¸»é”®(primaryKey),å°±å¯ä»¥ç›´æ¥è¿™æ ·,ç›´æ¥è°ƒç”¨<code>createOrUpdateInRealm:realm</code>å‡½æ•°,å¦‚æœIDä¸º<code>ABCDEFG</code>çš„Bookå¯¹è±¡å·²ç»å­˜åœ¨,é‚£ä¹ˆå¯¹è±¡å°±ä¼šç›´æ¥æ›´æ–°,å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª,è¿™ä¸€ç‚¹ç‰¹åˆ«åƒåœ¨å†™railsçš„æ—¶å€™æ“ä½œæ•°æ®åº“çš„æ–¹æ³•,éå¸¸æ–¹ä¾¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Book *book = [[Book alloc] init];</span><br><span class="line">book.ID = @&quot;ABCDEFG&quot;;</span><br><span class="line">book.title = @&quot;ç¾è¥¿ä¹‹æ—…&quot;;</span><br><span class="line">book.cover = @&quot;www.apple.com&quot;;</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">[Book createOrUpdateInRealm:realm withValue:book];</span><br><span class="line">[realm commitWriteTransaction];</span><br><span class="line"></span><br><span class="line">//è¿˜å¯ä»¥è¿™æ ·,ç›´æ¥é€šè¿‡é”®å€¼å¯¹è¿›è¡Œæ›´æ–°</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">[Book createOrUpdateInRealm:realm withValue:@&#123;@&quot;ID&quot;: @&quot;ABCDEFG&quot;, @&quot;title&quot;: @&quot;ç¾è¥¿ä¹‹æ—…&quot;&#125;];</span><br><span class="line">[realm commitWriteTransaction];</span><br></pre></td></tr></table></figure></p>
<h3 id="Realmæ•°æ®åº“çš„CURD"><a href="#Realmæ•°æ®åº“çš„CURD" class="headerlink" title="Realmæ•°æ®åº“çš„CURD"></a>Realmæ•°æ®åº“çš„CURD</h3><h5 id="C-create-amp-U-update"><a href="#C-create-amp-U-update" class="headerlink" title="C(create) &amp; U(update)"></a>C(create) &amp; U(update)</h5><p>å…¶å®åœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»ç®€å•çš„è¯´è¿‡åˆ›å»ºè·Ÿæ›´æ–°çš„æ–¹æ³•äº†,ä¸€èˆ¬æ¥è¯´å¦‚æœä½ è®¾ç½®äº†ä¸»é”®çš„è¯,ä¼šç”¨çš„æœ€å¤šçš„åŸºæœ¬ä¸Šå°±æ˜¯<code>createOrUpdateInRealm</code>æ–¹æ³•,è€Œä¸”é¡¹ç›®ä¸­æˆ‘ä»¬ä¸€èˆ¬é¢å‘å¯¹è±¡ç¼–ç¨‹,ä¼šæŠŠé”®å€¼å¯¹,jsonç­‰æ•°æ®ä½¿ç”¨ä¸€äº›ç±»ä¼¼<code>Mantle,YYModel</code>çš„å·¥å…·è½¬æ¢ä¸ºå¯¹è±¡,æ‰€ä»¥å…¶ä»–ç±»ä¼¼äºé€šè¿‡å­—å…¸åˆ›å»ºæ›´æ–°æ•°æ®,æ”¯æŒå±åµŒå¥—å±æ€§(Nested Object)çš„åˆ›å»ºç­‰åŠŸèƒ½å°±ä¸å¤šç»†è¯´äº†.</p>
<h5 id="R-Retrieve-è¯»å–æ•°æ®"><a href="#R-Retrieve-è¯»å–æ•°æ®" class="headerlink" title="R(Retrieve)è¯»å–æ•°æ®"></a>R(Retrieve)è¯»å–æ•°æ®</h5><p>Realmçš„æ•°æ®æŸ¥è¯¢éå¸¸å¼ºå¤§,åŸºæœ¬ä¸Šæ¥è§¦è¿‡<code>è°“è¯NSPredicate</code>ä¹‹åéƒ½å¯ä»¥å¿«é€Ÿä¸Šæ‰‹,æŸ¥è¯¢çš„ç»“æœå­˜å‚¨ä¸º<code>RLMResults&lt;model*&gt;</code>çš„å®¹å™¨,å…¶å®è¿™ç©æ„å®Œå…¨å¯ä»¥å½“åš<code>NSArray</code>æ¥ç”¨,åŒæ ·æ”¯æŒä¸‹æ ‡æ“ä½œ,æ”¯æŒå¿«é€Ÿéå†,ä¸åŒçš„æ˜¯<code>RLMResult</code>éœ€è¦æŒ‡å®šç±»å‹,æ¯”å¦‚<code>RLMResult&lt;Book*&gt;</code>å°±æ˜¯åŒ…å«å¤šä¸ªbookçš„é›†åˆ,å¦å¤–æˆ‘ä»¬å¼€ç¯‡æåˆ°çš„Realmæ˜¯æ‡’åŠ è½½çš„,ä¹Ÿå°±æ˜¯è¯´æŸ¥è¯¢åˆ°çš„ç»“æœåªä¼šåœ¨è¢«ç¡®å®šè®¿é—®æŸä¸ªå±æ€§çš„æ—¶å€™æ‰å»è¯»å–,å¦åˆ™æˆ‘ä»¬çš„æŸ¥è¯¢æ“ä½œå°†ä¼šè¢«å»¶è¿Ÿæ‰§è¡Œ.<br>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸¾å‡ ä¸ªæŸ¥è¯¢çš„ä¾‹å­:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//ä»é»˜è®¤æ•°æ®åº“æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦</span><br><span class="line">RLMResults&lt;Book *&gt; *books = [Book allObjects];</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨æ–­è¨€å­—ç¬¦ä¸²æŸ¥è¯¢</span><br><span class="line">RLMResults&lt;Book *&gt; *books = [Book objectsWhere:@&quot;title = &apos;ç¾è¥¿ä¹‹æ—… AND cover = &apos;www.apple.com&apos;&apos;&quot;]</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨NSPredicateæŸ¥è¯¢</span><br><span class="line">NSPredicate *pred = [NSPredicate predicateWithFormat:@&quot;title = &apos;ç¾è¥¿ä¹‹æ—… AND cover = &apos;www.apple.com&apos;&apos;&quot;];</span><br><span class="line">books = [Book objectsWithPredicate:pred];</span><br><span class="line"></span><br><span class="line">//é“¾å¼æŸ¥è¯¢</span><br><span class="line">RLMResults&lt;Book *&gt; *books = [Book objectsWhere:@&quot;title = &apos;ç¾è¥¿ä¹‹æ—…&apos;&quot;];</span><br><span class="line">RLMResults&lt;Book *&gt; *otherBooks = [books objectsWhere:@&quot;cover = &apos;www.apple.com&apos;&quot;];</span><br><span class="line"></span><br><span class="line">//æ’åº</span><br><span class="line">//æŒ‰ç…§dataä»å¤§åˆ°å°è¿›è¡Œæ’åº</span><br><span class="line">RLMResults&lt;Book *&gt; *sortedBooks = [[Book objectsWhere:@&quot;title = &apos;ç¾è¥¿ä¹‹æ—…&apos; &quot;] sortedResultsUsingProperty:@&quot;date&quot; ascending:YES];</span><br></pre></td></tr></table></figure></p>
<p>Tips1:æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®æƒ³ä½¿ç”¨<code>NSArray</code>è€Œä¸æ˜¯<code>RLMArray</code>æˆ–è€…<code>RLMResult</code>,æˆ‘ä»¬å¯ä»¥ç®€å•çš„è¿›è¡Œéå†è½¬æ¢:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å‡è®¾è¿™æ˜¯æˆ‘ä»¬æŸ¥è¯¢åˆ°çš„ç»“æœ</span><br><span class="line">RLMResult&lt;Day*&gt;days;</span><br><span class="line">NSMutableArray *array = [NSMutableArray array];</span><br><span class="line">    for (Day *day in days) &#123;</span><br><span class="line">Â  Â  Â  Â  [array addObject:day];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips2:å†™ç¨‹åºçš„æ—¶å€™å‰äººä¸€ç›´å‘Šè¯‰æˆ‘ä»¬DRYåŸåˆ™(Dont Repeat Yourself),æ¯æ¬¡å†™<code>beginWriteTransaction</code>è·Ÿ<code>commitWriteTransaction</code>ä¹Ÿç¡®å®å¾ˆè®©äººçƒ¦,æˆ‘ä»¬å¯ä»¥ç¨å¾®å°è£…ä¸€ä¸ªæ–¹æ³•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (void)update:(void (^)())block &#123;</span><br><span class="line">Â  Â  [self.realm beginWriteTransaction];</span><br><span class="line">Â  Â  block();</span><br><span class="line">Â  Â  [self.realm commitWriteTransaction];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·ç”¨çš„æ—¶å€™å°±å¯ä»¥è¿™ä¹ˆç”¨:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[book update:^&#123;</span><br><span class="line">     book.cover = @&quot;new cover&quot;;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>æ›´å¤šå…³äºæ–­è¨€çš„ä½¿ç”¨æ¯”å¦‚== ,&lt;=,&gt;=,AND,BETWEEN BEGINSWITHç­‰ä½¿ç”¨æ–¹æ³•å¯ä»¥æŸ¥çœ‹<a href="https://realm.io/news/nspredicate-cheatsheet/" target="_blank" rel="noopener">è¿™é‡Œçš„æ–‡æ¡£</a></p>
<h5 id="D-Delete-åˆ é™¤æ•°æ®"><a href="#D-Delete-åˆ é™¤æ•°æ®" class="headerlink" title="D(Delete)åˆ é™¤æ•°æ®"></a>D(Delete)åˆ é™¤æ•°æ®</h5><p>åœ¨realmä¸­æƒ³è¦åˆ é™¤æ•°æ®éå¸¸ç®€å•,å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªbookæ¨¡å‹éœ€è¦åˆ é™¤,åªéœ€è¦:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//åˆ é™¤å•æ¡è®°å½•</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">[realm deleteObject:book];</span><br><span class="line">[realm commitWriteTransaction];</span><br><span class="line"></span><br><span class="line">//æ¸…ç©ºrealmæ•°æ®åº“,æ¸…ç©ºåRealmæ–‡ä»¶ä¸ä¼šé‡Šæ”¾æ‰æ‰€å ç”¨çš„ç©ºé—´,è¿™æ˜¯ä¸ºäº†ä¿ç•™ç©ºé—´ä»¥ä¾¿æ—¥åæé«˜å­˜å‚¨é€Ÿåº¦</span><br><span class="line">[realm beginWriteTransaction];</span><br><span class="line">[realm deleteAllObjects];</span><br><span class="line">[realm commitWriteTransaction];</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,å¤§å¤šæ•°æ“ä½œéƒ½æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿›è¡Œçš„,å¦‚æœåœ¨é”™è¯¯çš„äº‹åŠ¡ä¸­è¿›è¡Œäº†æ•°æ®çš„æ“ä½œ,realmä¼šæŠ›å‡ºå¼‚å¸¸.</p>
<h3 id="Realmä¸­çš„çº¿ç¨‹"><a href="#Realmä¸­çš„çº¿ç¨‹" class="headerlink" title="Realmä¸­çš„çº¿ç¨‹"></a>Realmä¸­çš„çº¿ç¨‹</h3><p>é¦–å…ˆå•ä¸ªçº¿ç¨‹ä¸­,æˆ‘ä»¬å½“ç„¶æ— éœ€è€ƒè™‘å¹¶å‘æˆ–è€…å¤šçº¿ç¨‹å¤„ç†çš„é—®é¢˜,ä¹Ÿæ— éœ€è€ƒè™‘çº¿ç¨‹é”,æˆ‘ä»¬å”¯ä¸€çš„ä¿®æ”¹çš„æ“ä½œä¹Ÿæ˜¯åœ¨å¯¹è±¡è‡ªå·±çš„realmäº‹åŠ¡ä¸­.<br>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯,æˆ‘ä»¬ä¸èƒ½è®©å¤šä¸ªçº¿ç¨‹æ‹¥æœ‰åŒä¸€ä¸ªRealmå¯¹è±¡çš„å®ä¾‹.<br>å¦‚æœæƒ³è¦è·¨çº¿ç¨‹ä½¿ç”¨æ•°æ®åº“çš„è¯,æˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªçº¿ç¨‹éƒ½å»åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Realmå®ä¾‹,å¦‚æœéƒ½æ˜¯æ‰§è¡Œçš„åŒä¸€ä¸ªæ•°æ®åº“çš„è¯,è¿™äº›å®ä¾‹éƒ½æ˜¯æŒ‡å‘ç£ç›˜çš„åŒä¸€ä¸ªæ–‡ä»¶çš„.<br>Realmå®˜æ–¹ç»™äº†ä¸€ä¸ªç»“åˆGCD(å¤§ä¸­æ¢æ´¾å‘233333)å¤§æ‰¹é‡å†™å…¥æ•°æ®çš„ä¾‹å­:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(queue, ^&#123;</span><br><span class="line">Â  Â  @autoreleasepool &#123;</span><br><span class="line">Â  Â  Â  Â  // åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­è·å– Realm å’Œè¡¨å®ä¾‹</span><br><span class="line">Â  Â  Â  Â  RLMRealm *realm = [RLMRealm defaultRealm];</span><br><span class="line">Â Â  Â  Â  Â </span><br><span class="line">Â  Â  Â  Â  // é€šè¿‡å¼€å¯å†™å…¥æ“ä½œå°†å†™å…¥é—­åŒ…åˆ†æˆå¤šä¸ªå¾®å°éƒ¨åˆ†</span><br><span class="line">Â  Â  Â  Â  for (NSInteger idx1 = 0; idx1 &lt; 1000; idx1++) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  [realm beginWriteTransaction];</span><br><span class="line">Â Â  Â  Â  Â  Â  Â </span><br><span class="line">Â  Â  Â  Â  Â  Â  // é€šè¿‡å­—å…¸æ’å…¥è¡Œï¼Œå¿½ç•¥å±æ€§æ¬¡åº</span><br><span class="line">Â  Â  Â  Â  Â  Â  for (NSInteger idx2 = 0; idx2 &lt; 1000; idx2++) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  [Person createInRealm:realm</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  withValue:@&#123;@&quot;name&quot;Â  Â  Â  :Â  randomString,</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @&quot;birthdate&quot; : randomDate&#125;];</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â Â  Â  Â  Â  Â  Â </span><br><span class="line">Â  Â  Â  Â  Â  Â  // æäº¤å†™å…¥äº‹åŠ¡ä»¥ç¡®ä¿æ•°æ®åœ¨å…¶ä»–çº¿ç¨‹å¯ç”¨</span><br><span class="line">Â  Â  Â  Â  Â  Â  [realm commitWriteTransaction];</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="å¯¹JSONçš„æ”¯æŒ"><a href="#å¯¹JSONçš„æ”¯æŒ" class="headerlink" title="å¯¹JSONçš„æ”¯æŒ"></a>å¯¹JSONçš„æ”¯æŒ</h3><p>å¾ˆé—æ†¾Realmå¹¶ä¸ç›´æ¥æ”¯æŒJSON(é‚£ä½ è¯´ä¸ªåµå•Š~)â€¦<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ç³»åˆ—åŒ–å‡½æ•°æ¥åºåˆ—åŒ–JSONæ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSData *data = [@&quot;&#123;\&quot;name\&quot;: \&quot;æ—§é‡‘å±±\&quot;, \&quot;cityId\&quot;: 123&#125;&quot; dataUsingEncoding: NSUTF8StringEncoding];</span><br><span class="line">[realm transactionWithBlock:^&#123; </span><br><span class="line">    id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:NULL]; </span><br><span class="line">    [City createOrUpdateInRealm:realm withValue:json];&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<p>å½“ç„¶å…¶å®çœŸæ­£çš„å·¥ä½œä¸­æˆ‘ä»¬ä¸€èˆ¬ä¹Ÿä¸è¿™ä¹ˆæ¥æ,ä¸€èˆ¬ä¼šç”¨<code>Mantle,YYModel</code>ç­‰å…¶ä»–ç±»ä¼¼å·¥å…·å°†jsonè½¬æ¢ä¸ºå¯¹è±¡ä¹‹åç›´æ¥è¿›è¡Œå­˜å‚¨,åé¢æˆ‘ä¹Ÿæ‰“ç®—å†™ä¸€äº›Realm+YYModelçš„ä½¿ç”¨å¿ƒå¾—.</p>
<h3 id="å¦‚ä½•æŸ¥çœ‹å­˜å‚¨åœ¨Realmä¸­çš„æ•°æ®"><a href="#å¦‚ä½•æŸ¥çœ‹å­˜å‚¨åœ¨Realmä¸­çš„æ•°æ®" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹å­˜å‚¨åœ¨Realmä¸­çš„æ•°æ®"></a>å¦‚ä½•æŸ¥çœ‹å­˜å‚¨åœ¨Realmä¸­çš„æ•°æ®</h3><p><strong>å¦‚æœä½¿ç”¨æ¨¡æ‹Ÿå™¨è¿›è¡Œè°ƒè¯•,å¯ä»¥é€šè¿‡</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[RLMRealmConfiguration defaultConfiguration].fileURL</span><br></pre></td></tr></table></figure></p>
<p>æ‰“å°å‡ºRealm æ•°æ®åº“åœ°å€,ç„¶ååœ¨Finderä¸­<code>âŒ˜â‡§G</code>è·³è½¬åˆ°å¯¹åº”è·¯å¾„ä¸‹,ç”¨Realm Browseræ‰“å¼€å¯¹åº”çš„<code>.realm</code>æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°æ•°æ®å•¦.<br><strong>ä½¿ç”¨çœŸæœºè°ƒè¯•çš„è¯</strong><br>Xcode-&gt;Window-&gt;Devices(<code>âŒ˜â‡§2</code>),ç„¶åæ‰¾åˆ°å¯¹åº”çš„è®¾å¤‡ä¸é¡¹ç›®,ç‚¹å‡»<code>Download Container</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/290760-790baece0848503f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>å¯¼å‡ºxcappdataæ–‡ä»¶å,æ˜¾ç¤ºåŒ…å†…å®¹,è¿›åˆ°<code>AppData-&gt;Documents</code>,ä½¿ç”¨<code>Realm Browser</code>æ‰“å¼€<code>.realm</code>æ–‡ä»¶å³å¯.</p>
<h3 id="é‡åˆ°çš„ä¸€äº›å‘æˆ–è€…ä¸çˆ½çš„åœ°æ–¹"><a href="#é‡åˆ°çš„ä¸€äº›å‘æˆ–è€…ä¸çˆ½çš„åœ°æ–¹" class="headerlink" title="é‡åˆ°çš„ä¸€äº›å‘æˆ–è€…ä¸çˆ½çš„åœ°æ–¹"></a>é‡åˆ°çš„ä¸€äº›å‘æˆ–è€…ä¸çˆ½çš„åœ°æ–¹</h3><p>å½“ç„¶,è¿™ä¹ˆä¸€ä¸ªè¿˜ç®—æ¯”è¾ƒæ–°çš„å·¥å…·è¯´æ˜¯å®Œç¾çš„è‚¯å®šæ˜¯ä¸å¯èƒ½,æˆ‘åœ¨ä½¿ç”¨ä¸­ä¹Ÿåœ¨ç»å¸¸åœ°éª‚å¨˜,è™½ç„¶åæ¥å‘ç°å¥½å¤šæ˜¯ä½¿ç”¨å§¿åŠ¿ä¸å¯¹23333</p>
<ol>
<li>æ‰€æœ‰çš„æ“ä½œéƒ½è¦åœ¨äº‹åŠ¡ä¸­,éº»çƒ¦,ä¸è¿‡æˆ‘ä»¬å¯ä»¥åƒæ–‡ä¸­tipsé‚£æ ·è¿›è¡Œå°å°çš„å°è£….</li>
<li>è¦æ—¶åˆ»æ³¨æ„æ“ä½œçš„æ˜¯ä¸æ˜¯åŒä¸€ä¸ªrealmå®ä¾‹,ä¸ç„¶ä¼šcrash,crash logä¸­,iOSè·Ÿå®‰å“ä¸€æ ·,90%çš„crashéƒ½æ˜¯è·Ÿrealmæœ‰å…³ğŸ˜­,è¿˜è¦æ³¨æ„å¯¹è±¡æ˜¯å¦å¯ç”¨,è¿™ä¸ªæˆ‘ä»¬å¯ä»¥ç”¨<code>invalidated</code>å­—æ®µæ¥åˆ¤æ–­,ä¹Ÿç®—æ˜¯é˜²å¾¡å¼ç¼–ç¨‹äº†23333â€¦.</li>
<li>å†™æ•°æ®è¿ç§»(migrate)ä¸ç®—å¤ªå‹å¥½,ä¸å¤ªå–œæ¬¢,é•¿æœŸä¸‹æ¥,è¿ç§»çš„ä»£ç ç”»ç¾ä¸çœ‹â€¦â€¦ä¹Ÿå¯èƒ½æ˜¯è‡ªå·±åŠŸåŠ›ä¸å¤Ÿ,æ‰€ä»¥æ–‡ç« ä¸­è‡ªå·±ä¹Ÿæ²¡å†™å…³äºè¿ç§»çš„å†…å®¹,æƒ³è¦äº†è§£çš„å¯ä»¥çœ‹å®˜æ–¹çš„migrate demo,ä»€ä¹ˆæ—¶å€™ç§»åŠ¨ç«¯å†™æ•°æ®è¿ç§»èƒ½åƒå†™railsé‚£ä¹ˆçˆ½å°±å¥½äº†â€¦.</li>
<li>è·¨çº¿ç¨‹ä¼ é€’æ•°æ®è¿˜ç®—éº»çƒ¦,ä¸è¿‡å¯ä»¥æ¥å—.</li>
<li>realmå¯¹è±¡å¦‚æœè°ƒç”¨<code>class</code>æ–¹æ³•ä¼šè¿”å›ç±»ä¼¼äº<code>RLMAccessor_2_Day</code>çš„ç»“æœ,è€Œä¸æ˜¯é¢„æƒ³çš„<code>Day</code>,è¿™ç‚¹æ³¨æ„ä¸€ä¸‹å°±å¥½.</li>
<li><code>Realm</code>æ˜¯<code>C++</code>å®ç°çš„,æ‰€ä»¥çœ‹ç€ä¸€å †<code>.mm</code>çš„æºç ,å¯¹æˆ‘æ¥è¯´åŸºæœ¬ä¸ä¼šäº§ç”Ÿå»é˜…è¯».çš„æƒ³æ³•</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/15/iOS9æ–°ç‰¹æ€§ã®3D-touch-ä¸‹ç¯‡/" rel="next" title="iOS9æ–°ç‰¹æ€§ã®3D-touch-ä¸‹ç¯‡">
                <i class="fa fa-chevron-left"></i> iOS9æ–°ç‰¹æ€§ã®3D-touch-ä¸‹ç¯‡
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/21/ä½¿ç”¨Realm+YYModel+AFNetworkingæ„å»ºä¸€ä¸ªç®€æ˜“çš„app/" rel="prev" title="ä½¿ç”¨Realm+YYModel+AFNetworkingæ„å»ºä¸€ä¸ªç®€æ˜“çš„app">
                ä½¿ç”¨Realm+YYModel+AFNetworkingæ„å»ºä¸€ä¸ªç®€æ˜“çš„app <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">é»„å°‘å</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨realmå‘¢"><span class="nav-number">1.</span> <span class="nav-text"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x8981;&#x7528;realm&#x5462;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x8981;&#x7528;realm&#x5462;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x8981;&#x7528;realm&#x5462;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…"><span class="nav-number">2.</span> <span class="nav-text"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨"><span class="nav-number">3.</span> <span class="nav-text"><a href="#&#x4F7F;&#x7528;" class="headerlink" title="&#x4F7F;&#x7528;"></a>&#x4F7F;&#x7528;</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#åˆ›å»ºæ•°æ®åº“"><span class="nav-number">3.0.1.</span> <span class="nav-text"><a href="#&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;"></a>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ„å»ºåŸºäºrealmçš„æ•°æ®model"><span class="nav-number">3.0.2.</span> <span class="nav-text"><a href="#&#x6784;&#x5EFA;&#x57FA;&#x4E8E;realm&#x7684;&#x6570;&#x636E;model" class="headerlink" title="&#x6784;&#x5EFA;&#x57FA;&#x4E8E;realm&#x7684;&#x6570;&#x636E;model"></a>&#x6784;&#x5EFA;&#x57FA;&#x4E8E;realm&#x7684;&#x6570;&#x636E;model</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Realmæ•°æ®åº“çš„CURD"><span class="nav-number">4.</span> <span class="nav-text"><a href="#Realm&#x6570;&#x636E;&#x5E93;&#x7684;CURD" class="headerlink" title="Realm&#x6570;&#x636E;&#x5E93;&#x7684;CURD"></a>Realm&#x6570;&#x636E;&#x5E93;&#x7684;CURD</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#C-create-amp-U-update"><span class="nav-number">4.0.1.</span> <span class="nav-text"><a href="#C-create-amp-U-update" class="headerlink" title="C(create) &amp; U(update)"></a>C(create) &amp; U(update)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#R-Retrieve-è¯»å–æ•°æ®"><span class="nav-number">4.0.2.</span> <span class="nav-text"><a href="#R-Retrieve-&#x8BFB;&#x53D6;&#x6570;&#x636E;" class="headerlink" title="R(Retrieve)&#x8BFB;&#x53D6;&#x6570;&#x636E;"></a>R(Retrieve)&#x8BFB;&#x53D6;&#x6570;&#x636E;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#D-Delete-åˆ é™¤æ•°æ®"><span class="nav-number">4.0.3.</span> <span class="nav-text"><a href="#D-Delete-&#x5220;&#x9664;&#x6570;&#x636E;" class="headerlink" title="D(Delete)&#x5220;&#x9664;&#x6570;&#x636E;"></a>D(Delete)&#x5220;&#x9664;&#x6570;&#x636E;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Realmä¸­çš„çº¿ç¨‹"><span class="nav-number">5.</span> <span class="nav-text"><a href="#Realm&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;" class="headerlink" title="Realm&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;"></a>Realm&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¹JSONçš„æ”¯æŒ"><span class="nav-number">6.</span> <span class="nav-text"><a href="#&#x5BF9;JSON&#x7684;&#x652F;&#x6301;" class="headerlink" title="&#x5BF9;JSON&#x7684;&#x652F;&#x6301;"></a>&#x5BF9;JSON&#x7684;&#x652F;&#x6301;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•æŸ¥çœ‹å­˜å‚¨åœ¨Realmä¸­çš„æ•°æ®"><span class="nav-number">7.</span> <span class="nav-text"><a href="#&#x5982;&#x4F55;&#x67E5;&#x770B;&#x5B58;&#x50A8;&#x5728;Realm&#x4E2D;&#x7684;&#x6570;&#x636E;" class="headerlink" title="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x5B58;&#x50A8;&#x5728;Realm&#x4E2D;&#x7684;&#x6570;&#x636E;"></a>&#x5982;&#x4F55;&#x67E5;&#x770B;&#x5B58;&#x50A8;&#x5728;Realm&#x4E2D;&#x7684;&#x6570;&#x636E;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é‡åˆ°çš„ä¸€äº›å‘æˆ–è€…ä¸çˆ½çš„åœ°æ–¹"><span class="nav-number">8.</span> <span class="nav-text"><a href="#&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x6216;&#x8005;&#x4E0D;&#x723D;&#x7684;&#x5730;&#x65B9;" class="headerlink" title="&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x6216;&#x8005;&#x4E0D;&#x723D;&#x7684;&#x5730;&#x65B9;"></a>&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x6216;&#x8005;&#x4E0D;&#x723D;&#x7684;&#x5730;&#x65B9;</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 &mdash; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é»„å°‘å</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://crossPQW.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://yoursite.com/2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/';
          this.page.identifier = '2016/10/19/ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“/';
          this.page.title = 'ä½¿ç”¨Realmçš„ä¸€äº›æ€»ç»“';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://crossPQW.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
